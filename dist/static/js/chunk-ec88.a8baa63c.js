(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ec88","chunk-eb20","chunk-7c28","chunk-5214","chunk-3145","chunk-d31d","chunk-fc72"],{"14Xm":function(t,e,r){t.exports=r("cSMa")},"3ADX":function(t,e,r){"use strict";var n=r("14Xm"),o=r.n(n),i=r("4d7F"),a=r.n(i),l=r("D3Ub"),s=r.n(l),c=r("bNJ/");function d(t,e){return Object(c.a)({url:t,method:"get",params:e})}e.a={data:function(){return{loading:!0,data:[],page:0,size:10,total:0,url:"",params:{},query:{}}},methods:{init:function(){var t=this;return s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.beforeInit();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",new a.a(function(e,r){t.loading=!0,d(t.url,t.params).then(function(r){t.total=r.total,t.data=r.list,setTimeout(function(){t.loading=!1},200),e(r)}).catch(function(e){t.loading=!1,r(e)})}));case 5:case"end":return e.stop()}},e,t)}))()},beforeInit:function(){return!0},pageChange:function(t){this.page=t-1,this.init()},sizeChange:function(t){this.page=0,this.size=t,this.init()}}}},"7UJr":function(t,e,r){"use strict";r.r(e);var n=r("ZAAW"),o=(r("tWJv"),{name:"info",props:{dataModel:{type:Object,require:!0}},created:function(){},data:function(){return{parent_id:"",loading:!1,formEdited:!1,options:[],pClass:"请输入模型关键字",rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}]}}},watch:{dataModel:function(t){t.parent&&(this.pClass=t.parent.name)}},methods:{updateModelInfo:function(){var t=this,e={id:this.dataModel.id,desc:this.dataModel.desc};this.parent_id&&(e.parent_id=this.parent_id),Object(n.c)(e).then(function(){t.formEdited=!1,t.$notify({title:"修改成功",type:"success",duration:1500}),t.$emit("refreshData"),t.parent_id="",t.options=[]})},queryManager:function(t){var e=this;if(0!=t.length){var r={name:t,exc:this.dataModel.id};Object(n.g)(r).then(function(t){e.options=t.list})}}}}),i=(r("SE3J"),r("KHd+")),a=Object(i.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-row",[r("el-col",{attrs:{span:12}},[r("div",[r("el-form",{attrs:{model:t.dataModel,"label-width":"90px",rules:t.rules}},[r("el-form-item",{attrs:{label:"模型名称",prop:"name"}},[r("el-input",{attrs:{disabled:""},model:{value:t.dataModel.name,callback:function(e){t.$set(t.dataModel,"name",e)},expression:"dataModel.name"}})],1)],1)],1)]),t._v(" "),r("el-col",{attrs:{span:12}},[r("div",[r("el-form",{attrs:{model:t.dataModel,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"父类"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{"remote-method":t.queryManager,loading:t.loading,remote:"","reserve-keyword":"",filterable:"",clearable:"",placeholder:t.pClass},on:{change:function(e){t.formEdited=!0}},model:{value:t.parent_id,callback:function(e){t.parent_id=e},expression:"parent_id"}},t._l(t.options,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)],1)])],1),t._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("div",[r("el-form",{attrs:{model:t.dataModel,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"业务线(TODO)"}},[r("el-input",{attrs:{disabled:""},model:{value:t.dataModel.alias,callback:function(e){t.$set(t.dataModel,"alias",e)},expression:"dataModel.alias"}})],1)],1)],1)]),t._v(" "),r("el-col",{attrs:{span:12}},[r("div",[r("el-form",{attrs:{model:t.dataModel,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"负责人"}},[r("el-input",{attrs:{disabled:""},model:{value:t.dataModel.owner.username,callback:function(e){t.$set(t.dataModel.owner,"username",e)},expression:"dataModel.owner.username"}})],1)],1)],1)])],1),t._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("div",[r("el-form",{attrs:{model:t.dataModel,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"模型描述"}},[r("el-input",{attrs:{autosize:{minRows:2,maxRows:4},placeholder:t.$t("placeholder.desc"),type:"textarea"},on:{change:function(e){t.formEdited=!0}},model:{value:t.dataModel.desc,callback:function(e){t.$set(t.dataModel,"desc",e)},expression:"dataModel.desc"}})],1)],1)],1)])],1),t._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.formEdited,expression:"formEdited"}],attrs:{align:"center"}},[r("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:t.updateModelInfo}},[r("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"confirm_r"}}),t._v("保存修改")],1)],1)])],1),t._v(" "),r("hr",{staticStyle:{border:"1px dashed rgba(104,178,77,0.3)"}})],1)},[],!1,null,"7f76deea",null);a.options.__file="info.vue";e.default=a.exports},D3Ub:function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r("4d7F"));e.default=function(t){return function(){var e=t.apply(this,arguments);return new n.default(function(t,r){return function o(i,a){try{var l=e[i](a),s=l.value}catch(t){return void r(t)}if(!l.done)return n.default.resolve(s).then(function(t){o("next",t)},function(t){o("throw",t)});t(s)}("next")})}}},HUCd:function(t,e,r){},IUuP:function(t,e,r){"use strict";r.r(e);var n=r("ZAAW"),o=r("XV9m"),i={name:"app",components:{eForm:r("RsqA").default},props:{dataModel:{type:Object,require:!0}},data:function(){return{sup_this:this,loading:!1,modelId:0,list:[],options:[],currentAppId:0}},created:function(){0!==this.dataModel.id&&(this.modelId=this.dataModel.id,this.getModelApps())},watch:{dataModel:function(){0!==this.dataModel.id&&(this.modelId=this.dataModel.id,this.getModelApps())}},methods:{refreshList:function(){this.getModelApps()},confirmAction:function(t,e){this.modifyVersion(t,e)},getModelApps:function(){var t=this,e={modelId:this.modelId};Object(n.e)(e).then(function(e){t.list=e.list})},queryAppVersion:function(t){var e=this;if(0!=this.currentAppId){var r={app_id:this.currentAppId,version:t,size:5};Object(o.e)(r).then(function(t){e.options=t.list})}},rowClicked:function(t,e){"BUTTON"!=e.target.nodeName&&this.$refs.refTable.toggleRowExpansion(t)},setCurrentAppId:function(t){this.currentAppId=t},deleteAppModel:function(t){var e=this,r={id:t.model.id};Object(n.h)(r).then(function(t){e.$notify({title:"删除成功",type:"success",duration:1500}),e.getModelApps()})},addAction:function(){this.$refs.appForm.dialog=!0,this.$refs.appForm.appList=this.list,this.$refs.appForm.formatDisabledSimpleAppList()},selectorChanged:function(){this.currentAppId=this.form.appId,this.options=[]},modifyVersion:function(t,e){var r=this;""===t.option&&(t.option="-");var o={id:t.model.id};1===e&&(o.start_version=t.option),2===e&&(o.end_version=t.option),Object(n.f)(o).then(function(){r.$notify({title:"修改成功",type:"success",duration:1500}),1===e&&(t.model.start_version=t.option),2===e&&(t.model.end_version=t.option),t.option=""})}}},a=(r("XHIT"),r("KHd+")),l=Object(a.a)(i,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticStyle:{"margin-bottom":"10px","margin-top":"-5px"},attrs:{align:"center"}},[r("el-tag",{attrs:{size:"mini"}},[t._v("请配置App，否则可能会导致无法拉取到代码!")])],1),t._v(" "),r("div",{staticStyle:{"margin-bottom":"10px","margin-top":"-5px"},attrs:{align:"center"}},[r("el-tag",{staticStyle:{color:"red"},attrs:{size:"mini"}},[t._v("代码拉取功能等待完善!")])],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"refTable",staticStyle:{width:"100%"},attrs:{data:t.list,size:"small",border:""},on:{"row-click":t.rowClicked}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticStyle:{"margin-right":"-50px",height:"40px",display:"flex"}},[r("div",{staticStyle:{width:"34%"}},[t._v("\n            修改版本号\n            "),r("el-select",{staticStyle:{"margin-top":"5px"},attrs:{"remote-method":t.queryAppVersion,loading:t.loading,remote:"",clearable:"",filterable:"",placeholder:"请输入版本号关键字"},on:{focus:function(r){t.setCurrentAppId(e.row.app.id)}},model:{value:e.row.option,callback:function(r){t.$set(e.row,"option",r)},expression:"props.row.option"}},t._l(t.options,function(t){return r("el-option",{key:t.version,attrs:{label:t.version,value:t.version}})}))],1),t._v(" "),r("div",{staticClass:"contentDiv"},[r("el-popover",{directives:[{name:"show",rawName:"v-show",value:""===e.row.option&&"-"!=e.row.model.start_version&&""!=e.row.model.start_version,expression:"props.row.option === '' && props.row.model.start_version != '-' && props.row.model.start_version != ''"}],attrs:{placement:"top",width:"160"},model:{value:e.row.visible,callback:function(r){t.$set(e.row,"visible",r)},expression:"props.row.visible"}},[r("p",[t._v("确定要删除起始版本号么？")]),t._v(" "),r("div",{staticStyle:{"text-align":"right",margin:"0"}},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible=!1}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){t.confirmAction(e.row,1),e.row.visible=!1}}},[t._v("确定")])],1),t._v(" "),r("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",round:""},slot:"reference"},[t._v("删除开始版本")])],1),t._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:""!==e.row.option,expression:"props.row.option !== '' "}],staticStyle:{"margin-left":"10px"},attrs:{type:"primary",plain:"",round:"",size:"mini",icon:"el-icon-check"},on:{click:function(r){t.modifyVersion(e.row,1)}}},[t._v("\n              "+t._s("修改起始版本")+"\n            ")])],1),t._v(" "),r("div",{staticClass:"contentDiv"},[r("el-popover",{directives:[{name:"show",rawName:"v-show",value:""===e.row.option&&"-"!=e.row.model.end_version&&""!=e.row.model.end_version,expression:"props.row.option === ''&& props.row.model.end_version != '-' && props.row.model.end_version != ''"}],attrs:{placement:"top",width:"160"},model:{value:e.row.visible1,callback:function(r){t.$set(e.row,"visible1",r)},expression:"props.row.visible1"}},[r("p",[t._v("确定要删除结束版本号么？")]),t._v(" "),r("div",{staticStyle:{"text-align":"right",margin:"0"}},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible1=!1}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){t.confirmAction(e.row,2),e.row.visible1=!1}}},[t._v("确定")])],1),t._v(" "),r("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",round:""},slot:"reference"},[t._v("删除结束版本")])],1),t._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:""!==e.row.option,expression:"props.row.option !== ''"}],staticStyle:{"margin-left":"10px"},attrs:{type:"primary",plain:"",round:"",size:"mini",icon:""===e.row.option?"el-icon-delete":"el-icon-check"},on:{click:function(r){t.modifyVersion(e.row,2)}}},[t._v("\n              "+t._s("修改结束版本")+"\n            ")])],1)])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"app.name",label:"应用名"}}),t._v(" "),r("el-table-column",{attrs:{prop:"model.start_version",label:"起始版本"}}),t._v(" "),r("el-table-column",{attrs:{prop:"model.end_version",label:"结束版本"}}),t._v(" "),r("el-table-column",{attrs:{label:"操作",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.row.visible2,callback:function(r){t.$set(e.row,"visible2",r)},expression:"props.row.visible2"}},[r("p",[t._v("确定要删除所属应用么？")]),t._v(" "),r("div",{staticStyle:{"text-align":"right",margin:"0"}},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible2=!1}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){t.deleteAppModel(e.row)}}},[t._v("确定")])],1),t._v(" "),r("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-delete",round:""},slot:"reference"},[t._v("删除")])],1)]}}])})],1),t._v(" "),r("div",{staticStyle:{"margin-top":"10px"},attrs:{align:"center"}},[r("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-plus",round:""},on:{click:t.addAction}},[t._v("\n      "+t._s("所属App")+"\n    ")])],1),t._v(" "),r("e-form",{ref:"appForm",attrs:{modelId:t.modelId,appList:t.list},on:{refreshList:t.refreshList}}),t._v(" "),r("hr",{staticStyle:{border:"1px dashed rgba(104,178,77,0.3)","margin-top":"15px"}})],1)},[],!1,null,"1c503bd2",null);l.options.__file="app.vue";e.default=l.exports},Mrji:function(t,e,r){"use strict";var n=r("kTNl");r.n(n).a},NHFL:function(t,e,r){"use strict";var n=r("wlHv");r.n(n).a},RsqA:function(t,e,r){"use strict";r.r(e);var n=r("ZAAW"),o=r("tWJv"),i=r("XV9m"),a={name:"appForm",props:{modelId:{type:Number,require:!0}},data:function(){return{dialog:!1,loading:!0,currentAppId:0,options:[],form:{startVersion:"",endVersion:"",appId:null},simpleAppList:[],appList:[],rules:{appId:[{required:!0,message:"必须选择所属应用",trigger:"blur"}]}}},created:function(){this.getSimpleAppList()},methods:{getSimpleAppList:function(){var t=this;0==this.simpleAppList.length&&Object(o.c)().then(function(e){e.list&&(t.simpleAppList=e.list),t.loading=!1})},formatDisabledSimpleAppList:function(){var t=this;if(0!==this.appList.length){var e=function(e){var r=t.simpleAppList[e];r.disabled=!1,t.appList.forEach(function(t){r.id!==t.app.id||(r.disabled=!0)})};for(var r in this.simpleAppList)e(r)}},resetForm:function(){this.form.appId=null,this.form.endVersion="",this.form.startVersion=""},doneAction:function(){var t=this;this.$refs.form.validate(function(e){if(e){if(t.form.startVersion&&t.form.endVersion&&t.form.startVersion>t.form.endVersion)return void t.$message.error("开始版本不能大于结束版本");t.doSubmit()}})},doSubmit:function(){var t=this,e={app_id:this.form.appId,model_id:this.modelId};this.form.startVersion&&(e.start_Version=this.form.startVersion),this.form.endVersion&&(e.end_Version=this.form.endVersion),Object(n.a)(e).then(function(){t.$notify({title:"添加成功",type:"success",duration:1500}),t.resetForm(),t.$emit("refreshList")}),this.dialog=!1},selectorChanged:function(){this.currentAppId=this.form.appId,this.options=[]},queryAppVersion:function(t){var e=this;if(console.log("queryAppVersion"),0!=this.currentAppId){var r={app_id:this.currentAppId,version:t,size:5,sort:"+id"};Object(i.e)(r).then(function(t){e.options=t.list})}}}},l=(r("wAJT"),r("KHd+")),s=Object(l.a)(a,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{loading:t.loading,"append-to-body":!0,visible:t.dialog,title:"添加应用",width:"400px"},on:{"update:visible":function(e){t.dialog=e}}},[r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"90px",rules:t.rules}},[r("el-form-item",{attrs:{label:"应用名称",prop:"appId"}},[r("el-select",{staticClass:"filter-item",attrs:{filterable:"",clearable:"",placeholder:"选择应用"},on:{change:t.selectorChanged},model:{value:t.form.appId,callback:function(e){t.$set(t.form,"appId",e)},expression:"form.appId"}},t._l(t.simpleAppList,function(t){return r("el-option",{key:t.key,attrs:{label:t.name,disabled:t.disabled,value:t.id}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"起始版本",prop:"startVersion"}},[r("el-select",{staticStyle:{"margin-top":"5px"},attrs:{"remote-method":t.queryAppVersion,loading:t.loading,remote:"",disabled:null===t.form.appId,clearable:"",filterable:"",placeholder:"请输入版本号关键字"},model:{value:t.form.startVersion,callback:function(e){t.$set(t.form,"startVersion",e)},expression:"form.startVersion"}},t._l(t.options,function(t){return r("el-option",{key:t.version,attrs:{label:t.version,value:t.version}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"结束版本",prop:"endVersion"}},[r("el-select",{staticStyle:{"margin-top":"5px"},attrs:{"remote-method":t.queryAppVersion,loading:t.loading,remote:"",disabled:null===t.form.appId,clearable:"",filterable:"",placeholder:"请输入版本号关键字"},model:{value:t.form.endVersion,callback:function(e){t.$set(t.form,"endVersion",e)},expression:"form.endVersion"}},t._l(t.options,function(t){return r("el-option",{key:t.version,attrs:{label:t.version,value:t.version}})}))],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialog=!1}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.doneAction}},[t._v("确认")])],1)],1)},[],!1,null,"1dbb592d",null);s.options.__file="appForm.vue";e.default=s.exports},SE3J:function(t,e,r){"use strict";var n=r("HUCd");r.n(n).a},UfwC:function(t,e,r){},XHIT:function(t,e,r){"use strict";var n=r("byp/");r.n(n).a},XV9m:function(t,e,r){"use strict";r.d(e,"e",function(){return o}),r.d(e,"a",function(){return i}),r.d(e,"c",function(){return a}),r.d(e,"b",function(){return l}),r.d(e,"d",function(){return s});var n=r("bNJ/");function o(t){return Object(n.a)({url:"/app/version/list",method:"get",params:t})}function i(t,e,r,o,i,a,l){var s={app_id:t,version:e,parent_version:r,platform:o,approval_time:i,lock_time:a,gray_time:l};return Object(n.a)({url:"/app/version",method:"post",data:s})}function a(t){return Object(n.a)({url:"/app/version",method:"put",data:t})}function l(t){var e={id:t};return Object(n.a)({url:"/app/version",method:"delete",data:e})}function s(t,e){var r={id:t,status:e};return console.log("editStatus",r),Object(n.a)({url:"/app/version",method:"put",data:r})}},ZAAW:function(t,e,r){"use strict";r.d(e,"d",function(){return o}),r.d(e,"g",function(){return i}),r.d(e,"c",function(){return a}),r.d(e,"b",function(){return l}),r.d(e,"e",function(){return s}),r.d(e,"f",function(){return c}),r.d(e,"h",function(){return d}),r.d(e,"a",function(){return u});var n=r("bNJ/");function o(t){return Object(n.a)({url:"/tools/model?id="+t,method:"get"})}function i(t){return Object(n.a)({url:"/tools/model/list",method:"get",params:t})}function a(t){return Object(n.a)({url:"/tools/model",method:"put",data:t})}function l(t){return Object(n.a)({url:"/tools/model/attribute",method:"put",data:t})}function s(t){return Object(n.a)({url:"/tools/model_apps",method:"get",params:t})}function c(t){return Object(n.a)({url:"/tools/model_app/version",method:"put",data:t})}function d(t){return Object(n.a)({url:"/tools/model_app",method:"Delete",data:t})}function u(t){return Object(n.a)({url:"/tools/model_app",method:"POST",data:t})}},"byp/":function(t,e,r){},cSMa:function(t,e,r){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,i=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r("u4eC"),o)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},e68M:function(t,e,r){"use strict";r.r(e);var n={name:"operation"},o=(r("sBur"),r("KHd+")),i=Object(o.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tOperation"},[r("el-tag",{staticStyle:{"margin-right":"20px"},attrs:{type:"danger"}},[t._v("TODO")]),t._v(" "),r("el-button",{attrs:{type:"success",size:"mini"}},[t._v("生成代码")]),t._v(" "),r("el-button",{attrs:{type:"success",size:"mini"}},[t._v("模型关联")]),t._v(" "),r("el-button",{attrs:{type:"success",size:"mini"}},[t._v("历史记录")]),t._v(" "),r("el-button",{attrs:{type:"danger",size:"mini"}},[t._v("删除")]),t._v(" "),r("el-tag",{staticStyle:{"margin-left":"20px"}},[t._v("hash值")])],1)},[],!1,null,"aa96f66c",null);i.options.__file="operation.vue";e.default=i.exports},hTsm:function(t,e,r){},iQDL:function(t,e,r){"use strict";var n=r("kZvA");r.n(n).a},kTNl:function(t,e,r){},kZvA:function(t,e,r){},npVg:function(t,e,r){"use strict";r.r(e);var n=r("ZAAW"),o={name:"attributeForm",props:{modelId:{type:Number,require:!0}},data:function(){return{rules:{name:[{required:!0,message:"请输入属性名称",trigger:"blur"},{pattern:/^[A-Z][A-Za-z0-9_]+$/,message:"首字母大写的英文字母名字",trigger:"blur"}],properType:[{required:!0,message:"必须选择属性类型",trigger:"blur"}]},mQuery:!1,dialog:!1,loading:!1,form:{type:"String",name:"",model_name:"",model_id:null,comments:"",required:!0,default:""},currentAppId:0,options:[{name:"String"},{name:"Int"},{name:"Float"},{name:"Bool"},{name:"Array"},{name:"Object"}],optionsArray:[{name:"String",id:-1},{name:"Int",id:-2},{name:"Float",id:-3},{name:"Bool",id:-4}],options1:[{name:"是",id:!0},{name:"否",id:!1}],list:this.optionsArray}},methods:{resetForm:function(){this.form={type:"String",name:"",model_name:"",model_id:null,comments:"",required:!0,default:""}},doSubmit:function(){var t=this,e={id:this.modelId,attributes:[this.form]};Object(n.b)(e).then(function(){t.$notify({title:"添加成功",type:"success",duration:1500}),t.dialog=!1,t.$emit("refreshData"),t.resetForm()})},selectorChanged:function(t){"Object"===t||"Array"===t?this.mQuery=!0:(this.mQuery=!1,this.form.model_id=null,this.list=[])},selectionModelChanged:function(t){switch(t){case-1:this.form.model_name="String";break;case-2:this.form.model_name="Int";break;case-3:this.form.model_name="Float";break;case-4:this.form.model_name="Bool"}},queryModelList:function(t){var e=this;if(0!=t.length){var r={name:t,exc:this.modelId};Object(n.g)(r).then(function(t){"Array"===e.form.type?e.list=t.list.concat(e.optionsArray):e.list=t.list})}}}},i=(r("iQDL"),r("KHd+")),a=Object(i.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{loading:"loading","append-to-body":!0,visible:t.dialog,title:"添加属性",width:"400px"},on:{"update:visible":function(e){t.dialog=e}}},[r("el-form",{attrs:{model:t.form,"label-width":"80px",rules:t.rules}},[r("el-form-item",{attrs:{label:"属性名",prop:"name"}},[r("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"类型",prop:"properType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"输入模型关键字",clearable:""},on:{change:t.selectorChanged},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.options,function(t){return r("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}))],1),t._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.mQuery,expression:"mQuery"}],attrs:{label:"选择模型",prop:"properType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"输入模型关键字",remote:"",clearable:"",filterable:"","remote-method":t.queryModelList},on:{change:t.selectionModelChanged},model:{value:t.form.model_id,callback:function(e){t.$set(t.form,"model_id",e)},expression:"form.model_id"}},t._l(t.list,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"注释",prop:"comments"}},[r("el-input",{model:{value:t.form.comments,callback:function(e){t.$set(t.form,"comments",e)},expression:"form.comments"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"默认值",prop:"comments"}},[r("el-input",{model:{value:t.form.default,callback:function(e){t.$set(t.form,"default",e)},expression:"form.default"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"必须",prop:"comments"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择是否必须"},model:{value:t.form.required,callback:function(e){t.$set(t.form,"required",e)},expression:"form.required"}},t._l(t.options1,function(t){return r("el-option",{key:t.name,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialog=!1}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.doSubmit}},[t._v("确认")])],1)],1)},[],!1,null,"e3d37ca2",null);a.options.__file="attributeForm.vue";e.default=a.exports},ns15:function(t,e,r){"use strict";r.r(e);var n=r("3ADX"),o=r("ZAAW"),i=r("7UJr"),a=r("IUuP"),l=r("e68M"),s=r("qW52"),c={components:{eInfo:i.default,eOperation:l.default,eApp:a.default,eAttribute:s.default},mixins:[n.a],created:function(){this.modelId=this.$route.query.id,this.getDataModel()},data:function(){return{dataModel:{name:"",parent:{name:""},owner:{username:""}},modelId:void 0,loading:!0}},methods:{getDataModel:function(){var t=this;Object(o.d)(this.modelId).then(function(e){t.dataModel=e.model,t.dataModel.parent||(t.dataModel.parent={username:""}),t.loading=!1})},refreshData:function(){this.getDataModel()}}},d=(r("NHFL"),r("KHd+")),u=Object(d.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-container"},[r("div",{staticClass:"tHeader"},[t._v("\n    "+t._s(t.dataModel.name)+"\n  ")]),t._v(" "),r("e-operation"),t._v(" "),r("div",{staticClass:"tAlias"},[r("label",{staticStyle:{"margin-left":"5px",color:"rgb(104,178,77)","font-size":"18px"}},[t._v("\n      "+t._s(t.dataModel.alias)+"\n    ")])]),t._v(" "),r("e-info",{attrs:{dataModel:t.dataModel},on:{refreshData:t.refreshData}}),t._v(" "),r("e-app",{attrs:{dataModel:t.dataModel}}),t._v(" "),r("e-attribute",{attrs:{dataModel:t.dataModel},on:{refreshData:t.refreshData}})],1)},[],!1,null,"815202c4",null);u.options.__file="detail.vue";e.default=u.exports},qW52:function(t,e,r){"use strict";r.r(e);var n={name:"attribuite",components:{eForm:r("npVg").default},props:{dataModel:{type:Object,require:!0}},data:function(){return{loading:!1}},methods:{formatRequiredBoolean:function(t){return t?"是":"否"},formatModelType:function(t){return t.model_name?t.type+": "+t.model_name:t.type},addAction:function(){this.$refs.appForm.dialog=!0},refreshData:function(){this.$emit("refreshData")},rowClicked:function(t,e){"BUTTON"!=e.target.nodeName&&this.$refs.refTable.toggleRowExpansion(t)}}},o=(r("Mrji"),r("KHd+")),i=Object(o.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"refTable",staticStyle:{width:"100%"},attrs:{data:t.dataModel.attributes,size:"small",border:""},on:{"row-click":t.rowClicked}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticStyle:{"margin-right":"-50px",height:"40px",display:"flex"}},[t._v("\n          expand\n        ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"name",label:"属性名称"}}),t._v(" "),r("el-table-column",{attrs:{label:"属性类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.formatModelType(e.row))+"\n      ")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"必填"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.formatRequiredBoolean(e.row.required))+"\n      ")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"comments",label:"属性说明"}})],1),t._v(" "),r("div",{staticStyle:{"margin-top":"10px"},attrs:{align:"center"}},[r("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-plus",round:""},on:{click:t.addAction}},[t._v("\n      "+t._s("模型属性")+"\n    ")])],1),t._v(" "),r("eForm",{ref:"appForm",attrs:{modelId:t.dataModel.id},on:{refreshData:t.refreshData}})],1)},[],!1,null,"1bd9b5a2",null);i.options.__file="attribute.vue";e.default=i.exports},sBur:function(t,e,r){"use strict";var n=r("hTsm");r.n(n).a},tWJv:function(t,e,r){"use strict";r.d(e,"a",function(){return o}),r.d(e,"b",function(){return i}),r.d(e,"c",function(){return a});var n=r("bNJ/");function o(t){var e={bundle_id:t.bundle_id,icon:t.icon,name:t.name,desc:t.desc,managers:t.managers};return Object(n.a)({url:"/app",method:"post",data:e})}function i(t){var e={icon:t.icon,name:t.name,desc:t.desc,id:t.id,managers:t.managers,owner_id:t.owner_id};return Object(n.a)({url:"/app",method:"put",data:e})}function a(){return Object(n.a)({url:"/app/list/simple",method:"get"})}},u4eC:function(t,e){!function(e){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",c="object"==typeof t,d=e.regeneratorRuntime;if(d)c&&(t.exports=d);else{(d=e.regeneratorRuntime=c?t.exports:{}).wrap=_;var u="suspendedStart",p="suspendedYield",f="executing",m="completed",h={},v={};v[a]=function(){return this};var b=Object.getPrototypeOf,g=b&&b(b($([])));g&&g!==n&&o.call(g,a)&&(v=g);var y=A.prototype=x.prototype=Object.create(v);k.prototype=y.constructor=A,A.constructor=k,A[s]=k.displayName="GeneratorFunction",d.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},d.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(y),t},d.awrap=function(t){return{__await:t}},M(O.prototype),O.prototype[l]=function(){return this},d.AsyncIterator=O,d.async=function(t,e,r,n){var o=new O(_(t,e,r,n));return d.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},M(y),y[s]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},d.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},d.values=$,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return l.type="throw",l.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:$(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),h}}}function _(t,e,r,n){var o=e&&e.prototype instanceof x?e:x,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n=u;return function(o,i){if(n===f)throw new Error("Generator is already running");if(n===m){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=S(a,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var s=w(t,e,r);if("normal"===s.type){if(n=r.done?m:p,s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=m,r.method="throw",r.arg=s.arg)}}}(t,r,a),i}function w(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function x(){}function k(){}function A(){}function M(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function O(t){var e;this._invoke=function(r,n){function i(){return new Promise(function(e,i){!function e(r,n,i,a){var l=w(t[r],t,n);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==typeof c&&o.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(c).then(function(t){s.value=t,i(s)},a)}a(l.arg)}(r,n,e,i)})}return e=e?e.then(i,i):i()}}function S(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,S(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=w(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function $(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},wAJT:function(t,e,r){"use strict";var n=r("UfwC");r.n(n).a},wlHv:function(t,e,r){}}]);