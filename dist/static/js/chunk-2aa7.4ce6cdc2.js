(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2aa7"],{RsqA:function(t,e,n){"use strict";n.r(e);var r=n("ZAAW"),o=n("tWJv"),i=n("XV9m"),a={name:"appForm",props:{modelId:{type:Number,require:!0}},data:function(){return{dialog:!1,loading:!0,currentAppId:0,options:[],form:{startVersion:"",endVersion:"",appId:null},simpleAppList:[],appList:[]}},created:function(){this.getSimpleAppList()},methods:{getSimpleAppList:function(){var t=this;0==this.simpleAppList.length&&Object(o.c)().then(function(e){e.list&&(t.simpleAppList=e.list),t.loading=!1})},formatDisabledSimpleAppList:function(){var t=this;if(0!==this.appList.length){var e=function(e){var n=t.simpleAppList[e];n.disabled=!1,t.appList.forEach(function(t){n.id!==t.app.id||(n.disabled=!0)})};for(var n in this.simpleAppList)e(n)}},resetForm:function(){this.form.appId=null,this.form.endVersion="",this.form.startVersion=""},doSubmit:function(){var t=this,e={app_id:this.form.appId,model_id:this.modelId};this.form.startVersion&&(e.start_Version=this.form.startVersion),this.form.endVersion&&(e.end_Version=this.form.endVersion),Object(r.a)(e).then(function(){t.$notify({title:"添加成功",type:"success",duration:1500}),t.resetForm(),t.$emit("refreshList")}),this.dialog=!1},selectorChanged:function(){this.currentAppId=this.form.appId,this.options=[]},queryAppVersion:function(t){var e=this;if(0!=this.currentAppId){var n={app_id:this.currentAppId,version:t,size:5};Object(i.e)(n).then(function(t){e.options=t.list})}}}},s=(n("d7JI"),n("KHd+")),l=Object(s.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{loading:t.loading,"append-to-body":!0,visible:t.dialog,title:"添加应用",width:"400px"},on:{"update:visible":function(e){t.dialog=e}}},[n("el-form",{attrs:{model:t.form,"label-width":"90px"}},[n("el-form-item",{attrs:{label:"应用名称",prop:"name"}},[n("el-select",{staticClass:"filter-item",attrs:{filterable:"",clearable:"",placeholder:"选择应用"},on:{change:t.selectorChanged},model:{value:t.form.appId,callback:function(e){t.$set(t.form,"appId",e)},expression:"form.appId"}},t._l(t.simpleAppList,function(t){return n("el-option",{key:t.key,attrs:{label:t.name,disabled:t.disabled,value:t.id}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"起始版本"}},[n("el-select",{staticStyle:{"margin-top":"5px"},attrs:{"remote-method":t.queryAppVersion,loading:t.loading,remote:"",disabled:null===t.form.appId,clearable:"",filterable:"",placeholder:"请输入版本号关键字"},model:{value:t.form.startVersion,callback:function(e){t.$set(t.form,"startVersion",e)},expression:"form.startVersion"}},t._l(t.options,function(t){return n("el-option",{key:t.version,attrs:{label:t.version,value:t.version}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"结束版本"}},[n("el-select",{staticStyle:{"margin-top":"5px"},attrs:{"remote-method":t.queryAppVersion,loading:t.loading,remote:"",disabled:null===t.form.appId,clearable:"",filterable:"",placeholder:"请输入版本号关键字"},model:{value:t.form.endVersion,callback:function(e){t.$set(t.form,"endVersion",e)},expression:"form.endVersion"}},t._l(t.options,function(t){return n("el-option",{key:t.version,attrs:{label:t.version,value:t.version}})}))],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialog=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.doSubmit}},[t._v("确认")])],1)],1)},[],!1,null,"6ce65608",null);l.options.__file="appForm.vue";e.default=l.exports},XV9m:function(t,e,n){"use strict";n.d(e,"e",function(){return o}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return l});var r=n("bNJ/");function o(t){return Object(r.a)({url:"/app/version/list",method:"get",params:t})}function i(t,e,n,o,i,a,s){var l={app_id:t,version:e,parent_version:n,platform:o,approval_time:i,lock_time:a,gray_time:s};return Object(r.a)({url:"/app/version",method:"post",data:l})}function a(t){return Object(r.a)({url:"/app/version",method:"put",data:t})}function s(t){var e={id:t};return Object(r.a)({url:"/app/version",method:"delete",data:e})}function l(t,e){var n={id:t,status:e};return console.log("editStatus",n),Object(r.a)({url:"/app/version",method:"put",data:n})}},ZAAW:function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"f",function(){return i}),n.d(e,"b",function(){return a}),n.d(e,"d",function(){return s}),n.d(e,"e",function(){return l}),n.d(e,"g",function(){return d}),n.d(e,"a",function(){return p});var r=n("bNJ/");function o(t){return Object(r.a)({url:"/tools/model?id="+t,method:"get"})}function i(t){return Object(r.a)({url:"/tools/model/list",method:"get",params:t})}function a(t){return Object(r.a)({url:"/tools/model",method:"put",data:t})}function s(t){return Object(r.a)({url:"/tools/model_apps",method:"get",params:t})}function l(t){return Object(r.a)({url:"/tools/model_app/version",method:"put",data:t})}function d(t){return Object(r.a)({url:"/tools/model_app",method:"Delete",data:t})}function p(t){return Object(r.a)({url:"/tools/model_app",method:"POST",data:t})}},d7JI:function(t,e,n){"use strict";var r=n("daQp");n.n(r).a},daQp:function(t,e,n){},tWJv:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a});var r=n("bNJ/");function o(t){var e={bundle_id:t.bundle_id,icon:t.icon,name:t.name,desc:t.desc,managers:t.managers};return Object(r.a)({url:"/app",method:"post",data:e})}function i(t){var e={icon:t.icon,name:t.name,desc:t.desc,id:t.id,managers:t.managers,owner_id:t.owner_id};return Object(r.a)({url:"/app",method:"put",data:e})}function a(){return Object(r.a)({url:"/app/list/simple",method:"get"})}}}]);